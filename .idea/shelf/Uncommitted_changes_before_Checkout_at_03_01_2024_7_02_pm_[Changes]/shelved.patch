Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.service.impl;\r\n\r\nimport cn.hutool.core.util.ObjectUtil;\r\nimport cn.hutool.system.UserInfo;\r\nimport com.alibaba.druid.util.StringUtils;\r\nimport com.alibaba.fastjson2.JSON;\r\nimport com.alibaba.fastjson2.JSONObject;\r\nimport com.alibaba.fastjson2.filter.SimplePropertyPreFilter;\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.xmum.swe.dao.CustomerDao;\r\nimport com.xmum.swe.entities.BO.CustomerBO;\r\nimport com.xmum.swe.entities.DO.CustomerDO;\r\nimport com.xmum.swe.entities.VO.CustomerInsertVO;\r\nimport com.xmum.swe.entities.VO.CustomerModifyVO;\r\nimport com.xmum.swe.exception.SpookifyBusinessException;\r\nimport com.xmum.swe.service.CustomerService;\r\nimport com.xmum.swe.service.IdService;\r\nimport com.xmum.swe.utils.JsonUtil;\r\nimport com.xmum.swe.utils.SpookifyTimeStamp;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\nimport javax.servlet.http.Cookie;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport java.sql.Timestamp;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static com.alibaba.fastjson2.schema.JSONSchema.Type.Const;\r\n\r\n@Service\r\n@Slf4j\r\npublic class CustomerServiceImpl implements CustomerService {\r\n\r\n    @Resource\r\n    private CustomerDao customerDao;\r\n\r\n    @Resource\r\n    private IdService idService;\r\n\r\n//    @Resource\r\n//    private RedisTemplate redisTemplate;\r\n\r\n    @Override\r\n    public String login(CustomerInsertVO cusVO, HttpSession session, HttpServletRequest request, HttpServletResponse response) {\r\n        cusVO.setSessionId(session.getId());\r\n        this.insertCustomer(cusVO);\r\n        return this.doLogin(cusVO.getName().trim(), cusVO.getPassword().trim(), session, request, response).toJSONString();\r\n    }\r\n\r\n    public CustomerDO getCustomerById(String id) {\r\n//        if(redisTemplate.hasKey(id)) {\r\n//            return (CustomerDO)redisTemplate.opsForValue().get(id);\r\n//        }\r\n        CustomerDO customer = customerDao.selectById(id);\r\n        Optional.ofNullable(customer)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No such customer!\"));\r\n        return customer;\r\n    }\r\n\r\n    @Override\r\n    public CustomerDO getCustomerByName(String name) {\r\n        CustomerDO customer = customerDao.selectOne(new QueryWrapper<CustomerDO>().eq(\"c_name\", name));\r\n        Optional.ofNullable(customer)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No such customer!\"));\r\n        return customer;\r\n    }\r\n\r\n    public List<CustomerDO> getAllCustomers(){\r\n        List<CustomerDO> customers = customerDao.selectList(null);\r\n        Optional.ofNullable(customers)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No customer!\"));\r\n//        customers.stream().forEach(customer -> {\r\n//            redisTemplate.opsForValue().set(customer.getCId(), customer);\r\n//        });\r\n        return customers;\r\n    }\r\n\r\n    public CustomerDO getCustomerWithMaxId() {\r\n        CustomerDO[] arr = (CustomerDO[])customerDao.selectList(new QueryWrapper<CustomerDO>().orderByDesc(\"c_id\"))\r\n                .stream().\r\n                limit(1)\r\n                .toArray(CustomerDO[]::new);\r\n        if(ObjectUtil.isEmpty(arr)) return arr[0];\r\n        else {\r\n            CustomerDO cusDO = new CustomerDO();\r\n            cusDO.setCId(\"SPCS000001\");\r\n            return cusDO;\r\n        }\r\n    }\r\n    public Map<String, Object> insertICustomer(CustomerDO cusDO){\r\n        int num = customerDao.insert(cusDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", cusDO.getCId());\r\n        return map;\r\n    }\r\n\r\n    public Map<String, Object> updateCustomerById(CustomerDO cusDO) {\r\n        int num = customerDao.updateById(cusDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", cusDO.getCId());\r\n        return map;\r\n    }\r\n\r\n    public int deleteCustomerWithId(String id) {\r\n        int num = customerDao.deleteById(id);\r\n        return num;\r\n    }\r\n\r\n    public void getCustomerName(String name) {\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"name\", name);\r\n        List<CustomerDO> res = customerDao.selectByMap(map);\r\n        if(!res.isEmpty()) throw new SpookifyBusinessException(\"customer name cannot be duplicated!\");\r\n    }\r\n    @Override\r\n    public Map<String, Object> insertCustomer(CustomerInsertVO cusVO) {\r\n        //Layer 1\r\n        try {\r\n            this.getCustomerName(cusVO.getName());\r\n        }catch (Exception ex) {\r\n            throw new SpookifyBusinessException(\"customer name cannot be duplicated!\");\r\n        }\r\n        String nextId = idService.getNextId(this.getCustomerWithMaxId().getCId());\r\n        //Layer 2\r\n        CustomerBO cusBO = new CustomerBO();\r\n        BeanUtils.copyProperties(cusVO, cusBO, \"map\");\r\n        Timestamp curTime = SpookifyTimeStamp.getInstance().getTimeStamp();\r\n        cusBO.setCId(nextId);\r\n        cusBO.setCsCreate(curTime);\r\n        cusBO.setCsModified(curTime);\r\n        cusBO.setCsType(\"Insert\");\r\n        Map<String, Object> map = cusVO.getMap();\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"data\");\r\n        JSONObject obj = JSON.parseObject(JSON.toJSONString(cusBO, filter));\r\n        if(ObjectUtil.isNotNull(map)) obj.putAll(map);\r\n        cusBO.setData(obj.toJSONString());\r\n        //Layer 3\r\n        CustomerDO cusDO = new CustomerDO();\r\n        BeanUtils.copyProperties(cusBO, cusDO);\r\n        return this.insertICustomer(cusDO);\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> modifyCustomer(CustomerModifyVO cusVO) {\r\n        //Layer 1\r\n        CustomerDO preDO = this.getCustomerById(cusVO.getCId());\r\n        JSONObject preData = JSON.parseObject(preDO.getData());\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"map\");\r\n        JSONObject VO_data = JSON.parseObject(JSON.toJSONString(cusVO, filter));\r\n        if(ObjectUtil.isNotNull(cusVO.getMap())) VO_data.putAll(cusVO.getMap());     //get whole VO data\r\n        //Layer 2\r\n        JsonUtil.merge(preData, VO_data);\r\n        preData.put(\"status\", \"modified\");\r\n                preData.put(\"opType\", \"modify\");\r\n        preData.put(\"itModified\", SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        CustomerBO cusBO = JSON.parseObject(preData.toJSONString(), CustomerBO.class);\r\n        cusBO.setData(preData.toJSONString());\r\n        //Layer 3\r\n        CustomerDO cusDO = new CustomerDO();\r\n        BeanUtils.copyProperties(cusBO, cusDO);\r\n        return this.updateCustomerById(cusDO);\r\n    }\r\n\r\n    private JSONObject doLogin(String username, String password, HttpSession session, HttpServletRequest request, HttpServletResponse response) {\r\n        JSONObject res = new JSONObject();\r\n        res.put(\"code\", 0);\r\n        if (StringUtils.isEmpty(username) || StringUtils.isEmpty(password)) {\r\n            res.put(\"msg\", \"-1\");\r\n            return res;\r\n        }\r\n        List<String> passwordList = this.getAllCustomers().stream().map(CustomerDO::getPassword).collect(Collectors.toList());\r\n        if (!passwordList.contains(password)) {\r\n            res.put(\"msg\", \"-2\");\r\n            return res;\r\n        }\r\n        session.setAttribute(\"spookify-b2b-customer\", this.getCustomerByName(username));\r\n        Cookie cookie_username = new Cookie(\"cookie_username\", username);\r\n        cookie_username.setMaxAge(30 * 24 * 60 * 60);\r\n        cookie_username.setPath(request.getContextPath());\r\n        response.addCookie(cookie_username);\r\n        res.put(\"msg\", \"0\");\r\n        return res;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java	
@@ -1,7 +1,6 @@
 package com.xmum.swe.service.impl;
 
 import cn.hutool.core.util.ObjectUtil;
-import cn.hutool.system.UserInfo;
 import com.alibaba.druid.util.StringUtils;
 import com.alibaba.fastjson2.JSON;
 import com.alibaba.fastjson2.JSONObject;
@@ -19,7 +18,6 @@
 import com.xmum.swe.utils.SpookifyTimeStamp;
 import lombok.extern.slf4j.Slf4j;
 import org.springframework.beans.BeanUtils;
-import org.springframework.data.redis.core.RedisTemplate;
 import org.springframework.stereotype.Service;
 
 import javax.annotation.Resource;
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.service.impl;\r\n\r\nimport com.xmum.swe.enums.IdPos;\r\nimport com.xmum.swe.service.IdService;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.StringUtils;\r\n\r\nimport javax.annotation.Resource;\r\n\r\n@Service\r\n@Slf4j\r\npublic class IdServiceImpl implements IdService {\r\n\r\n    @Override\r\n    public String getNextId(String curMaxId) {\r\n        String oldSubString = curMaxId.substring(IdPos.ID_ENTITY_NUM.getPos(), IdPos.ID_END.getPos());\r\n        String newSubString = String.valueOf(String.format(\"%06d\", Integer.parseInt(oldSubString) + 1));\r\n        String newItemId = StringUtils.replace(curMaxId, oldSubString, newSubString);\r\n        log.info(\"----------ItemId:old-new: \" + curMaxId + \"-\" + newItemId + \"------------------\");\r\n        return newItemId;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java	
@@ -3,7 +3,6 @@
 import com.xmum.swe.enums.IdPos;
 import com.xmum.swe.service.IdService;
 import lombok.extern.slf4j.Slf4j;
-import org.springframework.data.redis.core.RedisTemplate;
 import org.springframework.stereotype.Service;
 import org.springframework.util.StringUtils;
 
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.service.impl;\r\n\r\nimport cn.hutool.core.util.ObjectUtil;\r\nimport com.alibaba.fastjson2.JSON;\r\nimport com.alibaba.fastjson2.JSONObject;\r\nimport com.alibaba.fastjson2.filter.SimplePropertyPreFilter;\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;\r\nimport com.xmum.swe.dao.OrderDao;\r\nimport com.xmum.swe.entities.BO.OrderBO;\r\nimport com.xmum.swe.entities.DO.OrderDO;\r\nimport com.xmum.swe.entities.VO.OrderInsertVO;\r\nimport com.xmum.swe.entities.VO.OrderModifyVO;\r\nimport com.xmum.swe.enums.IdPos;\r\nimport com.xmum.swe.exception.SpookifyBusinessException;\r\nimport com.xmum.swe.service.DetailService;\r\nimport com.xmum.swe.service.OrderService;\r\nimport com.xmum.swe.service.IdService;\r\nimport com.xmum.swe.utils.JsonUtil;\r\nimport com.xmum.swe.utils.SpookifyTimeStamp;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.sql.Timestamp;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\n@Service\r\n@Slf4j\r\npublic class OrderServiceImpl implements OrderService {\r\n\r\n    @Resource\r\n    private OrderDao orderDao;\r\n\r\n    @Resource\r\n    private IdService idService;\r\n\r\n    @Resource\r\n    private DetailService detailService;\r\n\r\n//    @Resource\r\n//    private RedisTemplate redisTemplate;\r\n\r\n    public OrderDO getOrderById(String id) {\r\n//        if(redisTemplate.hasKey(id)) {\r\n//            return (OrderDO)redisTemplate.opsForValue().get(id);\r\n//        }\r\n        OrderDO order = orderDao.selectById(id);\r\n        Optional.ofNullable(order)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No such order!\"));\r\n        return order;\r\n    }\r\n\r\n    public List<OrderDO> getAllOrders(){\r\n        List<OrderDO> orders = orderDao.selectList(null);\r\n        Optional.ofNullable(orders)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No orders!\"));\r\n//        orders.stream().forEach(order -> {\r\n//            redisTemplate.opsForValue().set(order.getOId(), order);\r\n//        });\r\n        return orders;\r\n    }\r\n\r\n    public OrderDO getOrderWithMaxId() {\r\n        OrderDO[] arr = (OrderDO[])orderDao.selectList(new QueryWrapper<OrderDO>().orderByDesc(\"o_id\"))\r\n                .stream().\r\n                limit(1)\r\n                .toArray(OrderDO[]::new);\r\n        if(!ObjectUtil.isEmpty(arr)) return arr[0];\r\n        else {\r\n            OrderDO orderDO = new OrderDO();\r\n            orderDO.setOId(\"SPOD000001\");\r\n            return orderDO;\r\n        }\r\n    }\r\n    public Map<String, Object> insertIOrder(OrderDO orderDO){\r\n        int num = orderDao.insert(orderDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", orderDO.getOId());\r\n        return map;\r\n    }\r\n\r\n    public Map<String, Object> updateOrderById(OrderDO orderDO) {\r\n        int num = orderDao.updateById(orderDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", orderDO.getOId());\r\n        return map;\r\n    }\r\n\r\n    public int deleteOrderWithId(String id) {\r\n        int num = orderDao.deleteById(id);\r\n        detailService.deleteDetailWithOid(id);\r\n        return num;\r\n    }\r\n\r\n    public void updateBalanceOfCustomer(String cusId, float deductNum) {\r\n        if(!cusId.startsWith(\"SPCS\") || cusId.length() != IdPos.ID_END.getPos()) throw new SpookifyBusinessException(\"cusId is not valid\");\r\n        OrderDO orderDO = orderDao.selectOne(new QueryWrapper<OrderDO>().and((i) -> {\r\n            i.eq(\"customer_id\", cusId);\r\n        }));\r\n        if(ObjectUtil.isNull(orderDO)) throw new SpookifyBusinessException(\"no such customer!\");\r\n        float remainNum = orderDO.getBalance() - deductNum;\r\n        OrderDO updateEntity = new OrderDO();\r\n        updateEntity.setBalance(remainNum);\r\n        updateEntity.setOpType(\"Modified\");\r\n        updateEntity.setOdModified(SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        orderDao.update(updateEntity, new UpdateWrapper<OrderDO>().eq(\"customer_id\", cusId));\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> insertOrder(OrderInsertVO orderVO) {\r\n        //Layer 1\r\n        String nextId = idService.getNextId(this.getOrderWithMaxId().getOId());\r\n        //Layer 2\r\n        OrderBO orderBO = new OrderBO();\r\n        BeanUtils.copyProperties(orderVO, orderBO, \"map\");\r\n        Timestamp curTime = SpookifyTimeStamp.getInstance().getTimeStamp();\r\n        orderBO.setOId(nextId);\r\n        orderBO.setOdCreate(curTime);\r\n        orderBO.setOdModified(curTime);\r\n        orderBO.setOpType(\"Insert\");\r\n        orderBO.setPaymentStatus(\"created\");\r\n        Map<String, Object> map = orderVO.getMap();\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"data\");\r\n        JSONObject obj = JSON.parseObject(JSON.toJSONString(orderBO, filter));\r\n        if(ObjectUtil.isNotNull(map)) obj.putAll(map);\r\n        orderBO.setData(obj.toJSONString());\r\n        //Layer 3\r\n        OrderDO orderDO = new OrderDO();\r\n        BeanUtils.copyProperties(orderBO, orderDO);\r\n        return this.insertIOrder(orderDO);\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> modifyOrder(OrderModifyVO orderVO) {\r\n        //Layer 1\r\n        OrderDO preDO = this.getOrderById(orderVO.getOId());\r\n        JSONObject preData = JSON.parseObject(preDO.getData());\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"map\");\r\n        JSONObject VO_data = JSON.parseObject(JSON.toJSONString(orderVO, filter));\r\n        if(ObjectUtil.isNotNull(orderVO.getMap())) VO_data.putAll(orderVO.getMap());     //get whole VO data\r\n        //Layer 2\r\n        JsonUtil.merge(preData, VO_data);\r\n        preData.put(\"paymentStatus\", \"completed\");\r\n        preData.put(\"opType\", \"modify\");\r\n        preData.put(\"odModified\", SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        preData.put(\"productPrice\", detailService.getProductPriceWithOid((orderVO.getOId())));\r\n        OrderBO orderBO = JSON.parseObject(preData.toJSONString(), OrderBO.class);\r\n        orderBO.setData(preData.toJSONString());\r\n        //Layer 3\r\n        OrderDO orderDO = new OrderDO();\r\n        BeanUtils.copyProperties(orderBO, orderDO);\r\n        this.updateBalanceOfCustomer(this.findCustomerIdWithOid(orderVO.getOId()), orderVO.getActualAmount());\r\n        return this.updateOrderById(orderDO);\r\n    }\r\n\r\n    private String findCustomerIdWithOid(String oid) {\r\n        OrderDO orderDO = orderDao.selectOne(new QueryWrapper<OrderDO>().and((i) -> {\r\n            i.eq(\"o_id\", oid);\r\n        }));\r\n        if(ObjectUtil.isNull(orderDO)) throw new SpookifyBusinessException(\"no such order!\");\r\n        return orderDO.getCustomerId();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java	
@@ -20,7 +20,6 @@
 import com.xmum.swe.utils.SpookifyTimeStamp;
 import lombok.extern.slf4j.Slf4j;
 import org.springframework.beans.BeanUtils;
-import org.springframework.data.redis.core.RedisTemplate;
 import org.springframework.stereotype.Service;
 
 import javax.annotation.Resource;
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"69c6736f-9d4c-4180-81ef-504ae8d021b9\" name=\"Changes\" comment=\"\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/misc.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/misc.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_1.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_1.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_7_43_pm__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_7_43_pm__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/dataSources.local.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/dataSources.local.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_2_12_PM__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_2_12_PM__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_3_12_PM__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_3_12_PM__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_14_PM__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_14_PM__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_27_PM__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_27_PM__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_16_15_27__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_16_15_27__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_19_20_32__Changes_.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_19_20_32__Changes_.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/portfolio-provider/src/main/webapp/WEB-INF/jsp/blogArticles.jsp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/portfolio-provider/src/main/webapp/WEB-INF/jsp/blogArticles.jsp\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/Assignment/portfolio-provider/target/classes/application-dev.yml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/Assignment/portfolio-provider/target/classes/application-dev.yml\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"dev\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;3checktheerror&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">\r\n    <option name=\"selectedUrlAndAccountId\">\r\n      <UrlAndAccount>\r\n        <option name=\"accountId\" value=\"33d8838d-bcb1-401a-b35d-b5ebdb143fb8\" />\r\n        <option name=\"url\" value=\"https://github.com/3checktheerror/spookify.git\" />\r\n      </UrlAndAccount>\r\n    </option>\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 2\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2XbuCv9zzVDUw9wK01HlNPNCx5L\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,\r\n    &quot;git-widget-placeholder&quot;: &quot;dev-hotfix-Luo&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;E:/Study_material/202309/Programming-Elective-II/Assignment1/Code/spookify&quot;,\r\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\r\n  }\r\n}</component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"69c6736f-9d4c-4180-81ef-504ae8d021b9\" name=\"Changes\" comment=\"\" />\r\n      <created>1698909976665</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1698909976665</updated>\r\n      <workItem from=\"1698909978155\" duration=\"6858000\" />\r\n      <workItem from=\"1698917319846\" duration=\"136000\" />\r\n      <workItem from=\"1698921739165\" duration=\"134000\" />\r\n      <workItem from=\"1698971299151\" duration=\"654000\" />\r\n      <workItem from=\"1699230410917\" duration=\"114000\" />\r\n      <workItem from=\"1700638441962\" duration=\"2161000\" />\r\n      <workItem from=\"1700640631791\" duration=\"366000\" />\r\n      <workItem from=\"1700741902754\" duration=\"1000\" />\r\n    </task>\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"RECENT_FILTERS\">\r\n      <map>\r\n        <entry key=\"Branch\">\r\n          <value>\r\n            <list>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"master\" />\r\n                </option>\r\n              </RecentGroup>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"dev-test-bak\" />\r\n                </option>\r\n              </RecentGroup>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"origin/dev-test\" />\r\n                </option>\r\n              </RecentGroup>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"origin/dev\" />\r\n                </option>\r\n              </RecentGroup>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"origin/dev-test-bak\" />\r\n                </option>\r\n              </RecentGroup>\r\n            </list>\r\n          </value>\r\n        </entry>\r\n        <entry key=\"User\">\r\n          <value>\r\n            <list>\r\n              <RecentGroup>\r\n                <option name=\"FILTER_VALUES\">\r\n                  <option value=\"*\" />\r\n                </option>\r\n              </RecentGroup>\r\n            </list>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"COLUMN_ID_WIDTH\">\r\n                <map>\r\n                  <entry key=\"Table.Default.Author.ColumnIdWidth\" value=\"108\" />\r\n                  <entry key=\"Table.Default.Date.ColumnIdWidth\" value=\"110\" />\r\n                  <entry key=\"Table.Space.CommitStatus.ColumnIdWidth\" value=\"109\" />\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	
+++ b/.idea/workspace.xml	
@@ -7,20 +7,17 @@
     <list default="true" id="69c6736f-9d4c-4180-81ef-504ae8d021b9" name="Changes" comment="">
       <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_1.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_6_56_pm__Changes_1.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_7_43_pm__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_15_11_2023_7_43_pm__Changes_.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/dataSources.local.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/dataSources.local.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_2_12_PM__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_2_12_PM__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_3_12_PM__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_20_2023_3_12_PM__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_14_PM__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_14_PM__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_27_PM__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_11_20_2023_2_27_PM__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_16_15_27__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_16_15_27__Changes_.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_19_20_32__Changes_.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/shelf/Uncommitted_changes_before_Update_at_2023_11_19_20_32__Changes_.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/Assignment/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/portfolio-provider/src/main/webapp/WEB-INF/jsp/blogArticles.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/portfolio-provider/src/main/webapp/WEB-INF/jsp/blogArticles.jsp" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/Assignment/portfolio-provider/target/classes/application-dev.yml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/portfolio-provider/target/classes/application-dev.yml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/pom.xml" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/pom.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -61,19 +58,52 @@
   </component>
   <component name="PropertiesComponent">{
   &quot;keyToString&quot;: {
+    &quot;RequestMappingsPanelOrder0&quot;: &quot;0&quot;,
+    &quot;RequestMappingsPanelOrder1&quot;: &quot;1&quot;,
+    &quot;RequestMappingsPanelWidth0&quot;: &quot;75&quot;,
+    &quot;RequestMappingsPanelWidth1&quot;: &quot;75&quot;,
     &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,
     &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
     &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,
-    &quot;git-widget-placeholder&quot;: &quot;dev-hotfix-Luo&quot;,
-    &quot;last_opened_file_path&quot;: &quot;E:/Study_material/202309/Programming-Elective-II/Assignment1/Code/spookify&quot;,
+    &quot;git-widget-placeholder&quot;: &quot;dev-hotfix-Qiu&quot;,
+    &quot;last_opened_file_path&quot;: &quot;G:/code/myProject/spookify/Assignment/portfolio-provider&quot;,
     &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
     &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
     &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
     &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
     &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
+    &quot;project.structure.last.edited&quot;: &quot;Modules&quot;,
+    &quot;project.structure.proportion&quot;: &quot;0.0&quot;,
+    &quot;project.structure.side.proportion&quot;: &quot;0.2&quot;,
+    &quot;spring.configuration.checksum&quot;: &quot;1810079eeb41ab2b0f7f51311e6a818f&quot;,
     &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
   }
 }</component>
+  <component name="ReactorSettings">
+    <option name="notificationShown" value="true" />
+  </component>
+  <component name="RunManager" selected="Spring Boot.B2BServer">
+    <configuration name="B2BServer" type="SpringBootApplicationConfigurationType" factoryName="Spring Boot" nameIsGenerated="true">
+      <option name="ACTIVE_PROFILES" value="dev" />
+      <module name="B2B-provider" />
+      <option name="SPRING_BOOT_MAIN_CLASS" value="com.xmum.swe.B2BServer" />
+      <method v="2">
+        <option name="Make" enabled="true" />
+      </method>
+    </configuration>
+    <configuration name="PortforlioServer" type="SpringBootApplicationConfigurationType" factoryName="Spring Boot" nameIsGenerated="true">
+      <option name="ACTIVE_PROFILES" value="dev" />
+      <module name="portfolio-provider" />
+      <option name="SPRING_BOOT_MAIN_CLASS" value="com.xmum.swe.PortforlioServer" />
+      <method v="2">
+        <option name="Make" enabled="true" />
+      </method>
+    </configuration>
+    <list>
+      <item itemvalue="Spring Boot.B2BServer" />
+      <item itemvalue="Spring Boot.PortforlioServer" />
+    </list>
+  </component>
   <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
   <component name="TaskManager">
     <task active="true" id="Default" summary="Default task">
@@ -90,6 +120,11 @@
       <workItem from="1700638441962" duration="2161000" />
       <workItem from="1700640631791" duration="366000" />
       <workItem from="1700741902754" duration="1000" />
+      <workItem from="1704027441041" duration="675000" />
+      <workItem from="1704028121409" duration="1231000" />
+      <workItem from="1704244425401" duration="4076000" />
+      <workItem from="1704265915205" duration="3966000" />
+      <workItem from="1704278670650" duration="802000" />
     </task>
     <servers />
   </component>
Index: Assignment/B2B-provider/pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n    <parent>\r\n        <artifactId>spookify</artifactId>\r\n        <groupId>com.xmum.swe</groupId>\r\n        <version>1.0-SNAPSHOT</version>\r\n        <relativePath>../pom.xml</relativePath>\r\n    </parent>\r\n    <modelVersion>4.0.0</modelVersion>\r\n\r\n    <artifactId>B2B-provider</artifactId>\r\n\r\n    <dependencies>\r\n        <!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-devtools -->\r\n        <!--        <dependency>-->\r\n        <!--            <groupId>org.springframework.boot</groupId>-->\r\n        <!--            <artifactId>spring-boot-devtools</artifactId>-->\r\n        <!--            <scope>runtime</scope>-->\r\n        <!--            <optional>true</optional>-->\r\n        <!--        </dependency>-->\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-actuator</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-aop</artifactId>\r\n            <version>2.2.2.RELEASE</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>mysql</groupId>\r\n            <artifactId>mysql-connector-java</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.alibaba</groupId>\r\n            <artifactId>druid</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.baomidou</groupId>\r\n            <artifactId>mybatis-plus-boot-starter</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>junit</groupId>\r\n            <artifactId>junit</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>log4j</groupId>\r\n            <artifactId>log4j</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.alibaba</groupId>\r\n            <artifactId>fastjson</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>cn.hutool</groupId>\r\n            <artifactId>hutool-all</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>com.xmum.swe</groupId>\r\n            <artifactId>common-infrastructure</artifactId>\r\n            <version>1.0-SNAPSHOT</version>\r\n            <scope>compile</scope>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <artifactId>fastjson</artifactId>\r\n                    <groupId>com.alibaba</groupId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper-spring-boot-starter -->\r\n        <dependency>\r\n            <groupId>com.github.pagehelper</groupId>\r\n            <artifactId>pagehelper-spring-boot-starter</artifactId>\r\n            <version>1.4.1</version>\r\n            <exclusions>\r\n                <exclusion>\r\n                    <artifactId>jsqlparser</artifactId>\r\n                    <groupId>com.github.jsqlparser</groupId>\r\n                </exclusion>\r\n            </exclusions>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.springfox</groupId>\r\n            <artifactId>springfox-swagger2</artifactId>\r\n            <version>2.9.2</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>io.springfox</groupId>\r\n            <artifactId>springfox-swagger-ui</artifactId>\r\n            <version>2.9.2</version>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>javax.servlet</groupId>\r\n            <artifactId>javax.servlet-api</artifactId>\r\n            <scope>provided</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>javax.servlet</groupId>\r\n            <artifactId>jstl</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-tomcat</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.apache.tomcat.embed</groupId>\r\n            <artifactId>tomcat-embed-jasper</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-data-redis</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.redisson</groupId>\r\n            <artifactId>redisson</artifactId>\r\n            <version>3.13.4</version>\r\n        </dependency>\r\n<!--        <dependency>-->\r\n<!--            <groupId>com.alibaba.cloud</groupId>-->\r\n<!--            <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>-->\r\n<!--            <version>2.2.2.RELEASE</version>-->\r\n<!--        </dependency>-->\r\n    </dependencies>\r\n    <packaging>war</packaging>\r\n\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/pom.xml b/Assignment/B2B-provider/pom.xml
--- a/Assignment/B2B-provider/pom.xml	
+++ b/Assignment/B2B-provider/pom.xml	
@@ -116,15 +116,15 @@
             <groupId>org.apache.tomcat.embed</groupId>
             <artifactId>tomcat-embed-jasper</artifactId>
         </dependency>
-        <dependency>
-            <groupId>org.springframework.boot</groupId>
-            <artifactId>spring-boot-starter-data-redis</artifactId>
-        </dependency>
-        <dependency>
-            <groupId>org.redisson</groupId>
-            <artifactId>redisson</artifactId>
-            <version>3.13.4</version>
-        </dependency>
+<!--        <dependency>-->
+<!--            <groupId>org.springframework.boot</groupId>-->
+<!--            <artifactId>spring-boot-starter-data-redis</artifactId>-->
+<!--        </dependency>-->
+<!--        <dependency>-->
+<!--            <groupId>org.redisson</groupId>-->
+<!--            <artifactId>redisson</artifactId>-->
+<!--            <version>3.13.4</version>-->
+<!--        </dependency>-->
 <!--        <dependency>-->
 <!--            <groupId>com.alibaba.cloud</groupId>-->
 <!--            <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>-->
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.service.impl;\r\n\r\nimport cn.hutool.core.util.ObjectUtil;\r\nimport com.alibaba.fastjson2.JSON;\r\nimport com.alibaba.fastjson2.JSONObject;\r\nimport com.alibaba.fastjson2.filter.SimplePropertyPreFilter;\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.xmum.swe.dao.ProductDao;\r\nimport com.xmum.swe.entities.BO.ProductBO;\r\nimport com.xmum.swe.entities.DO.ProductDO;\r\nimport com.xmum.swe.entities.VO.ProductInsertVO;\r\nimport com.xmum.swe.entities.VO.ProductModifyVO;\r\nimport com.xmum.swe.exception.SpookifyBusinessException;\r\nimport com.xmum.swe.service.IdService;\r\nimport com.xmum.swe.service.ProductService;\r\nimport com.xmum.swe.utils.JsonUtil;\r\nimport com.xmum.swe.utils.SpookifyTimeStamp;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.stereotype.Service;\r\nimport javax.annotation.Resource;\r\nimport java.sql.Timestamp;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\n@Service\r\n@Slf4j\r\npublic class ProductServiceImpl implements ProductService {\r\n    @Resource\r\n    private ProductDao productDao;\r\n\r\n    @Resource\r\n    private IdService idService;\r\n\r\n    @Resource\r\n    private RedisTemplate redisTemplate;\r\n\r\n\r\n    public ProductDO getProductById(String id) {\r\n//        if(redisTemplate.hasKey(id)) {\r\n//            return (ProductDO)redisTemplate.opsForValue().get(id);\r\n//        }\r\n        ProductDO product = productDao.selectById(id);\r\n        Optional.ofNullable(product)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No such product!\"));\r\n        return product;\r\n    }\r\n\r\n    public List<ProductDO> getAllProducts() {\r\n        List<ProductDO> products = productDao.selectList(null);\r\n        Optional.ofNullable(products)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"products list is empty!\"));\r\n//        products.stream().forEach(product -> {\r\n//            redisTemplate.opsForValue().set(product.getPId(), product);\r\n//        });\r\n        return products;\r\n    }\r\n\r\n    public ProductDO getProductWithMaxId() {\r\n        ProductDO[] arr = (ProductDO[])productDao.selectList(new QueryWrapper<ProductDO>().orderByDesc(\"p_id\"))\r\n                .stream().\r\n                limit(1)\r\n                .toArray(ProductDO[]::new);\r\n        if(ObjectUtil.isNotEmpty(arr)) return arr[0];\r\n        else {\r\n            ProductDO productDO = new ProductDO();\r\n            productDO.setPId(\"SPPD000001\");\r\n            return productDO;\r\n        }\r\n    }\r\n\r\n    public Map<String, Object> insertProduct(ProductDO productDO) {\r\n        int num = productDao.insert(productDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", productDO.getPId());\r\n        return map;\r\n    }\r\n\r\n    public boolean checkProductName(String name) {\r\n        ProductDO product = productDao.selectOne(new QueryWrapper<ProductDO>().eq(\"p_name\", name));\r\n        return !ObjectUtil.isNull(product);\r\n    }\r\n\r\n\r\n    public Map<String, Object> updateProductById(ProductDO productDO) {\r\n        int num = productDao.updateById(productDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", productDO.getPId());\r\n        return map;\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> insertProduct(ProductInsertVO productVO) {\r\n        //Layer 1\r\n        if(this.checkProductName(productVO.getPName())) {\r\n            Map<String, Object> map = new HashMap<>();\r\n            map.put(\"Error\", \"product name exists!\");\r\n            return map;\r\n        }\r\n        String nextId = idService.getNextId(this.getProductWithMaxId().getPId());\r\n        //Layer 2\r\n        ProductBO productBO = new ProductBO();\r\n        BeanUtils.copyProperties(productVO, productBO, \"map\");\r\n        Timestamp curTime = SpookifyTimeStamp.getInstance().getTimeStamp();\r\n        productBO.setPId(nextId);\r\n        productBO.setPdCreate(curTime);\r\n        productBO.setPdModified(curTime);\r\n        productBO.setOpType(\"Insert\");\r\n        Map<String, Object> map = productVO.getMap();\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"data\");\r\n        JSONObject obj = JSON.parseObject(JSON.toJSONString(productBO, filter));\r\n        if(ObjectUtil.isNotNull(map)) obj.putAll(map);\r\n        productBO.setData(obj.toJSONString());\r\n        //Layer 3\r\n        ProductDO productDO = new ProductDO();\r\n        BeanUtils.copyProperties(productBO, productDO);\r\n        return this.insertProduct(productDO);\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> modifyProduct(ProductModifyVO productVO) {\r\n        //Layer 1\r\n        ProductDO preDO = this.getProductById(productVO.getPId());\r\n        JSONObject preData = JSON.parseObject(preDO.getData());\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"map\");\r\n        JSONObject VO_data = JSON.parseObject(JSON.toJSONString(productVO, filter));\r\n        if(ObjectUtil.isNotNull(productVO.getMap())) VO_data.putAll(productVO.getMap());     //get whole VO data\r\n        //Layer 2\r\n        JsonUtil.merge(preData, VO_data);\r\n        preData.put(\"opType\", \"modify\");\r\n        preData.put(\"pdModified\", SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        ProductBO productBO = JSON.parseObject(preData.toJSONString(), ProductBO.class);\r\n        productBO.setData(preData.toJSONString());\r\n        //Layer 3\r\n        ProductDO productDO = new ProductDO();\r\n        BeanUtils.copyProperties(productBO, productDO);\r\n        return this.updateProductById(productDO);\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> deleteProduct(String id) {\r\n        int num = productDao.deleteById(id);\r\n        Map<String, Object> res = new HashMap();\r\n        res.put(\"id\", id);\r\n        res.put(\"num\", num);\r\n        return res;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java	
@@ -17,7 +17,6 @@
 import com.xmum.swe.utils.SpookifyTimeStamp;
 import lombok.extern.slf4j.Slf4j;
 import org.springframework.beans.BeanUtils;
-import org.springframework.data.redis.core.RedisTemplate;
 import org.springframework.stereotype.Service;
 import javax.annotation.Resource;
 import java.sql.Timestamp;
@@ -35,8 +34,8 @@
     @Resource
     private IdService idService;
 
-    @Resource
-    private RedisTemplate redisTemplate;
+//    @Resource
+//    private RedisTemplate redisTemplate;
 
 
     public ProductDO getProductById(String id) {
Index: Assignment/.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"e4529d72-2133-4ef7-959e-eb242dbb3a0d\" name=\"Changes\" comment=\"rename done\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/dataSources.local.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/dataSources.local.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/pom.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/pom.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/B2BServer.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/B2BServer.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/CustomerController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/CustomerController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DetailController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DetailController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DirectPageController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DirectPageController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/OrderController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/OrderController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/ProductController.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/ProductController.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/BO/CustomerBO.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/BO/CustomerBO.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/DO/CustomerDO.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/DO/CustomerDO.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerInsertVO.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerInsertVO.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerModifyVO.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerModifyVO.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/CustomerService.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/CustomerService.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/B2B-provider/src/main/resources/application-dev.yml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/B2B-provider/src/main/resources/application-dev.yml\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Jsp File\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$/..\" value=\"dev-hotfix-Qiu\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/..\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 0\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2YROkvHZMadfviuffkY96F1vq8X\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"RequestMappingsPanelOrder0\": \"0\",\r\n    \"RequestMappingsPanelOrder1\": \"1\",\r\n    \"RequestMappingsPanelWidth0\": \"75\",\r\n    \"RequestMappingsPanelWidth1\": \"75\",\r\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"WebServerToolWindowFactoryState\": \"false\",\r\n    \"git-widget-placeholder\": \"dev-hotfix-Qiu\",\r\n    \"jdk.selected.JAVA_MODULE\": \"corretto-1.8\",\r\n    \"last_opened_file_path\": \"G:/code/myProject/spookify/Assignment/B2B-provider/src/main/resources\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"nodejs_package_manager_path\": \"npm\",\r\n    \"project.structure.last.edited\": \"Modules\",\r\n    \"project.structure.proportion\": \"0.15\",\r\n    \"project.structure.side.proportion\": \"0.2\",\r\n    \"settings.editor.selected.configurable\": \"preferences.pluginManager\",\r\n    \"spring.configuration.checksum\": \"1810079eeb41ab2b0f7f51311e6a818f\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"G:\\code\\myProject\\spookify\\Assignment\\B2B-provider\\src\\main\\resources\" />\r\n      <recent name=\"G:\\code\\myProject\\spookify\\Assignment\\B2B-provider\\src\\main\\java\\com\\xmum\\swe\\entities\\VO\" />\r\n      <recent name=\"G:\\code\\myProject\\spookify\\Assignment\" />\r\n      <recent name=\"E:\\ProgramEProjectfile\\spookify\\Assignment\\portfolio-provider\\src\\main\\resources\\static\\images\\Bimage\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"com.xmum.swe.dao\" />\r\n      <recent name=\"com.xmum.swe.service\" />\r\n      <recent name=\"com.xmum.swe.service.impl\" />\r\n      <recent name=\"com.xmum.swe.entities.DO\" />\r\n      <recent name=\"com.xmum.swe.entities.BO\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Spring Boot.B2BServer\">\r\n    <configuration name=\"B2BServer\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"ACTIVE_PROFILES\" value=\"dev\" />\r\n      <module name=\"B2B-provider\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.xmum.swe.B2BServer\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.xmum.swe.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"PortforlioServer (1)\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" nameIsGenerated=\"true\">\r\n      <module name=\"portfolio-provider\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.xmum.swe.PortforlioServer\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"PortforlioServer\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <option name=\"ACTIVE_PROFILES\" value=\"dev\" />\r\n      <module name=\"portfolio-provider\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.xmum.swe.PortforlioServer\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"file://$MODULE_WORKING_DIR$\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.xmum.swe.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"Spring Boot.PortforlioServer (1)\" />\r\n      <item itemvalue=\"Spring Boot.B2BServer\" />\r\n      <item itemvalue=\"Spring Boot.PortforlioServer\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Spring Boot.B2BServer\" />\r\n        <item itemvalue=\"Spring Boot.PortforlioServer\" />\r\n        <item itemvalue=\"Spring Boot.PortforlioServer\" />\r\n        <item itemvalue=\"Spring Boot.B2BServer\" />\r\n        <item itemvalue=\"Spring Boot.PortforlioServer\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"e4529d72-2133-4ef7-959e-eb242dbb3a0d\" name=\"Changes\" comment=\"rename done\" />\r\n      <created>1700485075295</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1699230519355</updated>\r\n      <workItem from=\"1699230520535\" duration=\"101000\" />\r\n      <workItem from=\"1699231478454\" duration=\"2854000\" />\r\n      <workItem from=\"1699369368751\" duration=\"783000\" />\r\n      <workItem from=\"1699426423850\" duration=\"6692000\" />\r\n      <workItem from=\"1699435718571\" duration=\"1991000\" />\r\n      <workItem from=\"1699492434717\" duration=\"2316000\" />\r\n      <workItem from=\"1699521355471\" duration=\"164000\" />\r\n      <workItem from=\"1699524431893\" duration=\"5585000\" />\r\n      <workItem from=\"1699838151022\" duration=\"557000\" />\r\n      <workItem from=\"1699920949113\" duration=\"1285000\" />\r\n      <workItem from=\"1700007659288\" duration=\"2447000\" />\r\n      <workItem from=\"1700103456679\" duration=\"631000\" />\r\n      <workItem from=\"1700213798664\" duration=\"24751000\" />\r\n      <workItem from=\"1700286326146\" duration=\"25848000\" />\r\n      <workItem from=\"1700370135772\" duration=\"2022000\" />\r\n      <workItem from=\"1700641728044\" duration=\"19477000\" />\r\n      <workItem from=\"1700672736766\" duration=\"144000\" />\r\n      <workItem from=\"1700711104058\" duration=\"3893000\" />\r\n      <workItem from=\"1700717942569\" duration=\"5102000\" />\r\n      <workItem from=\"1700734602442\" duration=\"343000\" />\r\n      <workItem from=\"1700741915215\" duration=\"4153000\" />\r\n      <workItem from=\"1703475079864\" duration=\"770000\" />\r\n      <workItem from=\"1703509566652\" duration=\"6342000\" />\r\n      <workItem from=\"1703585536708\" duration=\"5983000\" />\r\n      <workItem from=\"1703641393306\" duration=\"10422000\" />\r\n      <workItem from=\"1703662987334\" duration=\"72000\" />\r\n      <workItem from=\"1703674729578\" duration=\"3210000\" />\r\n      <workItem from=\"1703740739165\" duration=\"138000\" />\r\n      <workItem from=\"1703740886474\" duration=\"2913000\" />\r\n      <workItem from=\"1703743808319\" duration=\"545000\" />\r\n      <workItem from=\"1703833535371\" duration=\"2005000\" />\r\n      <workItem from=\"1703925188880\" duration=\"1469000\" />\r\n      <workItem from=\"1703934603364\" duration=\"38000\" />\r\n      <workItem from=\"1703992751073\" duration=\"1182000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Merge remote-tracking branch 'origin/dev-hotfix' into dev-hotfix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700749073145</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700749073145</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Merge remote-tracking branch 'origin/dev-hotfix' into dev-hotfix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700749107805</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700749107805</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Merge remote-tracking branch 'origin/dev-hotfix' into dev-hotfix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1700749238789</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1700749238789</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Merge remote-tracking branch 'origin/dev-hotfix' into dev-hotfix\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1703381408927</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1703381408927</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"rename done\">\r\n      <option name=\"closed\" value=\"true\" />\r\n      <created>1703392677087</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1703392677087</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"6\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"CUSTOM_BOOLEAN_PROPERTIES\">\r\n                <map>\r\n                  <entry key=\"Show.Git.Branches\" value=\"true\" />\r\n                </map>\r\n              </option>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"dev-hotfix-Qiu\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"Merge remote-tracking branch 'origin/dev-hotfix' into dev-hotfix\" />\r\n    <MESSAGE value=\"rename done\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"rename done\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <pin-to-top-manager>\r\n      <pinned-members>\r\n        <PinnedItemInfo parentTag=\"com.xmum.swe.entities.DO.ItemDO\" memberName=\"opType\" />\r\n        <PinnedItemInfo parentTag=\"com.xmum.swe.entities.BO.ItemBO\" memberName=\"opType\" />\r\n      </pinned-members>\r\n    </pin-to-top-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/.idea/workspace.xml b/Assignment/.idea/workspace.xml
--- a/Assignment/.idea/workspace.xml	
+++ b/Assignment/.idea/workspace.xml	
@@ -4,28 +4,7 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="e4529d72-2133-4ef7-959e-eb242dbb3a0d" name="Changes" comment="rename done">
-      <change beforePath="$PROJECT_DIR$/.idea/dataSources.local.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/dataSources.local.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/pom.xml" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/pom.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/B2BServer.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/B2BServer.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/CustomerController.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/CustomerController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DetailController.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DetailController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DirectPageController.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/DirectPageController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/OrderController.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/OrderController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/ProductController.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/controller/ProductController.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/BO/CustomerBO.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/BO/CustomerBO.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/DO/CustomerDO.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/DO/CustomerDO.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerInsertVO.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerInsertVO.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerModifyVO.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/entities/VO/CustomerModifyVO.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/CustomerService.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/CustomerService.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/CustomerServiceImpl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/IdServiceImpl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/OrderServiceImpl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/java/com/xmum/swe/service/impl/ProductServiceImpl.java" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/B2B-provider/src/main/resources/application-dev.yml" beforeDir="false" afterPath="$PROJECT_DIR$/B2B-provider/src/main/resources/application-dev.yml" afterDir="false" />
-    </list>
+    <list default="true" id="e4529d72-2133-4ef7-959e-eb242dbb3a0d" name="Changes" comment="rename done" />
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><project version=\"4\">\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_1_8\" project-jdk-name=\"corretto-1.8\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/out\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	
+++ b/.idea/misc.xml	
@@ -1,4 +1,15 @@
+<?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
+  <component name="ExternalStorageConfigurationManager" enabled="true" />
+  <component name="MavenProjectsManager">
+    <option name="originalFiles">
+      <list>
+        <option value="$PROJECT_DIR$/Assignment/B2B-provider/pom.xml" />
+        <option value="$PROJECT_DIR$/Assignment/common-infrastructure/pom.xml" />
+        <option value="$PROJECT_DIR$/Assignment/portfolio-provider/pom.xml" />
+      </list>
+    </option>
+  </component>
   <component name="ProjectRootManager" version="2" languageLevel="JDK_1_8" project-jdk-name="corretto-1.8" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/out" />
   </component>
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.service.impl;\r\n\r\nimport cn.hutool.core.util.ObjectUtil;\r\nimport com.alibaba.fastjson2.JSON;\r\nimport com.alibaba.fastjson2.JSONObject;\r\nimport com.alibaba.fastjson2.filter.SimplePropertyPreFilter;\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.xmum.swe.dao.DetailDao;\r\nimport com.xmum.swe.entities.BO.DetailBO;\r\nimport com.xmum.swe.entities.DO.DetailDO;\r\nimport com.xmum.swe.entities.DO.OrderDO;\r\nimport com.xmum.swe.entities.VO.DetailInsertVO;\r\nimport com.xmum.swe.entities.VO.DetailModifyVO;\r\nimport com.xmum.swe.exception.SpookifyBusinessException;\r\nimport com.xmum.swe.service.IdService;\r\nimport com.xmum.swe.service.DetailService;\r\nimport com.xmum.swe.service.OrderService;\r\nimport com.xmum.swe.utils.JsonUtil;\r\nimport com.xmum.swe.utils.SpookifyTimeStamp;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.stereotype.Service;\r\nimport javax.annotation.Resource;\r\nimport java.sql.Timestamp;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Optional;\r\n\r\n@Service\r\n@Slf4j\r\npublic class DetailServiceImpl implements DetailService {\r\n    @Resource\r\n    private DetailDao detailDao;\r\n\r\n    @Resource\r\n    private OrderService orderService;\r\n\r\n    @Resource\r\n    private IdService idService;\r\n\r\n//    @Resource\r\n//    private RedisTemplate redisTemplate;\r\n\r\n\r\n\r\n    public DetailDO getDetailById(String id) {\r\n//        if(redisTemplate.hasKey(id)) {\r\n//            return (DetailDO)redisTemplate.opsForValue().get(id);\r\n//        }\r\n        DetailDO detail = detailDao.selectById(id);\r\n        Optional.ofNullable(detail)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"No such detail!\"));\r\n        return detail;\r\n    }\r\n\r\n    public List<DetailDO> getAllDetails() {\r\n        List<DetailDO> details = detailDao.selectList(null);\r\n        Optional.ofNullable(details)\r\n                .orElseThrow(() -> new SpookifyBusinessException(\"Detail list is empty!\"));\r\n//        details.stream().forEach(detail -> {\r\n//            redisTemplate.opsForValue().set(detail.getDId(), detail);\r\n//        });\r\n        return details;\r\n    }\r\n\r\n    public Map<String, Object> insertDetail(DetailDO detailDO) {\r\n        int num = detailDao.insert(detailDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", detailDO.getDId());\r\n        return map;\r\n    }\r\n\r\n    public DetailDO getDetailWithMaxId(){\r\n        DetailDO[] arr = (DetailDO[])detailDao.selectList(new QueryWrapper<DetailDO>().orderByDesc(\"d_id\"))\r\n                .stream().\r\n                limit(1)\r\n                .toArray(DetailDO[]::new);\r\n        if(ObjectUtil.isNotEmpty(arr)) return arr[0];\r\n        else {\r\n            DetailDO detailDO = new DetailDO();\r\n            detailDO.setDId(\"SPDT000001\");\r\n            return detailDO;\r\n        }\r\n    }\r\n\r\n    public Map<String, Object> updateDetailById(DetailDO detailDO) {\r\n        int num = detailDao.updateById(detailDO);\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put(\"num\", num);\r\n        map.put(\"id\", detailDO.getDId());\r\n        return map;\r\n    }\r\n\r\n    private int getNumOfDetailsWithOid(String oid){\r\n        return detailDao.selectList(new QueryWrapper<DetailDO>().eq(\"o_id_fk\", oid)).size();\r\n    }\r\n\r\n    public int deleteDetailWithId(String id) {\r\n        if(this.getNumOfDetailsWithOid(this.getOidWithDid(id)) == 1) {\r\n            DetailDO detailDO = this.getDetailById(id);\r\n            detailDao.deleteById(id);\r\n            orderService.deleteOrderWithId(detailDO.getOIdFk());\r\n            return 1;\r\n        }\r\n        String oid = getOidWithDid(id);\r\n        int num = detailDao.deleteById(id);\r\n        Map<String, Object> map = this.updateProductPrice(oid);\r\n        if((int)map.get(\"num\") == 0) {\r\n            log.error(\"Update product price failed!\");\r\n            throw new SpookifyBusinessException(\"Update product price failed!\");\r\n        }\r\n        return num;\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> insertDetail(DetailInsertVO detailVO) {\r\n        //Layer 1\r\n        try {\r\n            orderService.getOrderById(detailVO.getOIdFk());    //check if the foreign key exists\r\n        } catch (SpookifyBusinessException sp) {\r\n            throw new SpookifyBusinessException(\"Foreign key: oIdFk doesn't exist\");\r\n        }\r\n        String nextId = idService.getNextId(this.getDetailWithMaxId().getDId());\r\n        //Layer 2\r\n        DetailBO detailBO = new DetailBO();\r\n        BeanUtils.copyProperties(detailVO, detailBO, \"map\");\r\n        Timestamp curTime = SpookifyTimeStamp.getInstance().getTimeStamp();\r\n        detailBO.setDId(nextId);\r\n        detailBO.setDtCreate(curTime);\r\n        detailBO.setDtModified(curTime);\r\n        detailBO.setOpType(\"Insert\");\r\n        Map<String, Object> map = detailVO.getMap();\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"data\");\r\n        JSONObject obj = JSON.parseObject(JSON.toJSONString(detailBO, filter));\r\n        if(ObjectUtil.isNotNull(map)) obj.putAll(map);\r\n        detailBO.setData(obj.toJSONString());\r\n        //Layer 3\r\n        DetailDO detailDO = new DetailDO();\r\n        BeanUtils.copyProperties(detailBO, detailDO);\r\n        DetailModifyVO detail = new DetailModifyVO();\r\n        detail.setDId(detailDO.getDId());\r\n        this.insertDetail(detailDO);\r\n        return this.updateProductPrice(detail);\r\n    }\r\n\r\n\r\n    private Map<String, Object> modifyDetail(DetailModifyVO detailVO) {\r\n        //Layer 1\r\n        DetailDO preDO = this.getDetailById(detailVO.getDId());\r\n        JSONObject preData = JSON.parseObject(preDO.getData());\r\n        SimplePropertyPreFilter filter = new SimplePropertyPreFilter();\r\n        filter.getExcludes().add(\"map\");\r\n        JSONObject VO_data = JSON.parseObject(JSON.toJSONString(detailVO, filter));\r\n        if(ObjectUtil.isNotNull(detailVO.getMap())) VO_data.putAll(detailVO.getMap());     //get whole VO data\r\n        //Layer 2\r\n        JsonUtil.merge(preData, VO_data);\r\n        preData.put(\"opType\", \"modify\");\r\n        preData.put(\"quantity\", detailVO.getQuantity());\r\n        preData.put(\"subtotal\", this.getSubtotalByDid(detailVO.getDId(), detailVO.getQuantity()));\r\n        preData.put(\"dtModified\", SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        DetailBO detailBO = JSON.parseObject(preData.toJSONString(), DetailBO.class);\r\n        detailBO.setData(preData.toJSONString());\r\n        //Layer 3\r\n        DetailDO detailDO = new DetailDO();\r\n        BeanUtils.copyProperties(detailBO, detailDO);\r\n        return this.updateDetailById(detailDO);\r\n    }\r\n\r\n    @Override\r\n    public Map<String, Object> modifyMultiQuantities(Map<String, Object> map) {\r\n        DetailModifyVO detailVO = new DetailModifyVO();\r\n        for(Map.Entry<String, Object> entry : map.entrySet()) {\r\n            detailVO.setDId(entry.getKey());\r\n            detailVO.setQuantity((Integer)entry.getValue());\r\n            //先入库\r\n            this.modifyDetail(detailVO);\r\n        }\r\n        //更新order表\r\n        Map<String, Object> res = this.updateProductPrice(detailVO);\r\n        return res;\r\n    }\r\n\r\n    private Map<String, Object> updateProductPrice(DetailModifyVO detailVO) {\r\n        OrderDO orderDO = orderService.getOrderById(this.getOidWithDid(detailVO.getDId()));\r\n        return updateProductPriceWithOrderDO(orderDO);\r\n    }\r\n\r\n    private Map<String, Object> updateProductPriceWithOrderDO(OrderDO orderDO) {\r\n        orderDO.setProductPrice(this.getProductPriceWithOid(orderDO.getOId()));\r\n        orderDO.setOdModified(SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        orderDO.setOpType(\"modify\");\r\n        orderDO.setPaymentStatus(\"pending\");\r\n        JSONObject jsonObject = JSONObject.parseObject(orderDO.getData());\r\n        jsonObject.put(\"odModified\", SpookifyTimeStamp.getInstance().getTimeStamp());\r\n        orderDO.setData(jsonObject.toString());\r\n        Map<String, Object> res = orderService.updateOrderById(orderDO);\r\n        res.put(\"status\", \"success\");\r\n        return res;\r\n    }\r\n\r\n    private Map<String, Object> updateProductPrice(String oid) {\r\n        OrderDO orderDO = orderService.getOrderById(oid);\r\n        return updateProductPriceWithOrderDO(orderDO);\r\n    }\r\n\r\n    public float getProductPriceWithOid(String oid) {\r\n        if(!oid.startsWith(\"SPOD\") || oid.length() != 10) throw new SpookifyBusinessException(\"Invalid order id\");\r\n        List<DetailDO> detailDOList = detailDao.selectList(new QueryWrapper<DetailDO>().eq(\"o_id_fk\", oid));\r\n        float productPrice = detailDOList.stream().\r\n                map(detailDO -> this.getSubtotalByDid(detailDO.getDId())).\r\n                reduce(0f, Float::sum);\r\n        return productPrice;\r\n    }\r\n\r\n    private String getOidWithDid(String did) {\r\n        DetailDO detailDO = this.getDetailById(did);\r\n        return detailDO.getOIdFk();\r\n    }\r\n\r\n    private float getSubtotalByDid(String did) {\r\n        DetailDO detailDO = this.getDetailById(did);\r\n        float quantity = (float)detailDO.getQuantity();\r\n        float unitPrice = detailDO.getUnitPrice();\r\n        return quantity * unitPrice;\r\n    }\r\n\r\n    private float getSubtotalByDid(String did, float newQuantity) {\r\n        DetailDO detailDO = this.getDetailById(did);\r\n        float unitPrice = detailDO.getUnitPrice();\r\n        return newQuantity * unitPrice;\r\n    }\r\n\r\n    public void deleteDetailWithOid(String oid) {\r\n        List<DetailDO> detailDOList = detailDao.selectList(new QueryWrapper<DetailDO>().eq(\"o_id_fk\", oid));\r\n        detailDOList.forEach(detailDO -> this.deleteDetailWithId(detailDO.getDId()));\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/service/impl/DetailServiceImpl.java	
@@ -19,7 +19,6 @@
 import com.xmum.swe.utils.SpookifyTimeStamp;
 import lombok.extern.slf4j.Slf4j;
 import org.springframework.beans.BeanUtils;
-import org.springframework.data.redis.core.RedisTemplate;
 import org.springframework.stereotype.Service;
 import javax.annotation.Resource;
 import java.sql.Timestamp;
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.Interceptor;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistration;\r\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n/**\r\n * 注册拦截器\r\n */\r\n@Configuration\r\npublic class WebConfigurer implements WebMvcConfigurer {\r\n\r\n    @Resource\r\n    private LoginInterceptor loginHandlerInterceptor;\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        InterceptorRegistration ir = registry.addInterceptor(loginHandlerInterceptor);\r\n        // 拦截路径\r\n//        ir.addPathPatterns(\"/*\");\r\n        // 不拦截路径\r\n        List<String> irs = new ArrayList<String>();\r\n//        irs.add(\"/api/*\");\r\n//        irs.add(\"/wechat/*\");\r\n//        irs.add(\"/oauth\");\r\n        ir.excludePathPatterns(irs);\r\n    }\r\n}\r\n
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/Interceptor/WebConfigurer.java	
@@ -20,14 +20,14 @@
 
     @Override
     public void addInterceptors(InterceptorRegistry registry) {
-        InterceptorRegistration ir = registry.addInterceptor(loginHandlerInterceptor);
+//        InterceptorRegistration ir = registry.addInterceptor(loginHandlerInterceptor);
         // 拦截路径
 //        ir.addPathPatterns("/*");
         // 不拦截路径
-        List<String> irs = new ArrayList<String>();
+//        List<String> irs = new ArrayList<String>();
 //        irs.add("/api/*");
 //        irs.add("/wechat/*");
 //        irs.add("/oauth");
-        ir.excludePathPatterns(irs);
+//        ir.excludePathPatterns(irs);
     }
 }
Index: Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.xmum.swe.config;\r\n\r\nimport org.redisson.Redisson;\r\nimport org.redisson.config.Config;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\r\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\r\n\r\n@Configuration\r\npublic class RedisConfig\r\n{\r\n    @Bean\r\n    public RedisTemplate<String, Object> redisTemplate(LettuceConnectionFactory lettuceConnectionFactory)\r\n    {\r\n        RedisTemplate<String,Object> redisTemplate = new RedisTemplate<>();\r\n        redisTemplate.setConnectionFactory(lettuceConnectionFactory);\r\n        //设置key序列化方式string\r\n        redisTemplate.setKeySerializer(new StringRedisSerializer());\r\n        //设置value的序列化方式json\r\n        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n        redisTemplate.setHashKeySerializer(new StringRedisSerializer());\r\n        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n        redisTemplate.afterPropertiesSet();\r\n        return redisTemplate;\r\n    }\r\n\r\n    @Bean\r\n    public Redisson redisson()\r\n    {\r\n        Config config = new Config();\r\n        config.useSingleServer().setAddress(\"redis://192.168.111.185:6379\").setDatabase(0).setPassword(\"123456\");\r\n        return (Redisson) Redisson.create(config);\r\n    }\r\n}
===================================================================
diff --git a/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java b/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java
--- a/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java	
+++ b/Assignment/B2B-provider/src/main/java/com/xmum/swe/config/RedisConfig.java	
@@ -1,37 +1,37 @@
-package com.xmum.swe.config;
-
-import org.redisson.Redisson;
-import org.redisson.config.Config;
-import org.springframework.context.annotation.Bean;
-import org.springframework.context.annotation.Configuration;
-import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;
-import org.springframework.data.redis.core.RedisTemplate;
-import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
-import org.springframework.data.redis.serializer.StringRedisSerializer;
-
-@Configuration
-public class RedisConfig
-{
-    @Bean
-    public RedisTemplate<String, Object> redisTemplate(LettuceConnectionFactory lettuceConnectionFactory)
-    {
-        RedisTemplate<String,Object> redisTemplate = new RedisTemplate<>();
-        redisTemplate.setConnectionFactory(lettuceConnectionFactory);
-        //设置key序列化方式string
-        redisTemplate.setKeySerializer(new StringRedisSerializer());
-        //设置value的序列化方式json
-        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());
-        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
-        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());
-        redisTemplate.afterPropertiesSet();
-        return redisTemplate;
-    }
-
-    @Bean
-    public Redisson redisson()
-    {
-        Config config = new Config();
-        config.useSingleServer().setAddress("redis://192.168.111.185:6379").setDatabase(0).setPassword("123456");
-        return (Redisson) Redisson.create(config);
-    }
-}
\ No newline at end of file
+//package com.xmum.swe.config;
+//
+//import org.redisson.Redisson;
+//import org.redisson.config.Config;
+//import org.springframework.context.annotation.Bean;
+//import org.springframework.context.annotation.Configuration;
+//import org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;
+//import org.springframework.data.redis.core.RedisTemplate;
+//import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
+//import org.springframework.data.redis.serializer.StringRedisSerializer;
+//
+//@Configuration
+//public class RedisConfig
+//{
+//    @Bean
+//    public RedisTemplate<String, Object> redisTemplate(LettuceConnectionFactory lettuceConnectionFactory)
+//    {
+//        RedisTemplate<String,Object> redisTemplate = new RedisTemplate<>();
+//        redisTemplate.setConnectionFactory(lettuceConnectionFactory);
+//        //设置key序列化方式string
+//        redisTemplate.setKeySerializer(new StringRedisSerializer());
+//        //设置value的序列化方式json
+//        redisTemplate.setValueSerializer(new GenericJackson2JsonRedisSerializer());
+//        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
+//        redisTemplate.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());
+//        redisTemplate.afterPropertiesSet();
+//        return redisTemplate;
+//    }
+//
+//    @Bean
+//    public Redisson redisson()
+//    {
+//        Config config = new Config();
+//        config.useSingleServer().setAddress("redis://192.168.111.185:6379").setDatabase(0).setPassword("123456");
+//        return (Redisson) Redisson.create(config);
+//    }
+//}
\ No newline at end of file
